<?php
/**
 * CONFIG_ENV.JS.PHP
 * 
 * Expõe variáveis de ambiente do Docker para JavaScript
 * 
 * Este arquivo lê as variáveis de ambiente do Docker e as expõe
 * como variáveis globais simples no JavaScript (NÃO objeto de configuração).
 * 
 * Variáveis expostas:
 * - window.APP_BASE_URL: URL base do ambiente (dev ou prod)
 * - window.APP_ENVIRONMENT: Ambiente atual (development ou production)
 */

header('Content-Type: application/javascript');

// Ler variáveis de ambiente do Docker
$base_url = $_ENV['APP_BASE_URL'] ?? 'https://dev.bssegurosimediato.com.br';
$environment = $_ENV['PHP_ENV'] ?? 'development';

// Expor como variáveis globais simples (NÃO objeto de configuração)
?>
window.APP_BASE_URL = <?php echo json_encode($base_url, JSON_UNESCAPED_SLASHES); ?>;
window.APP_ENVIRONMENT = <?php echo json_encode($environment); ?>;

// Função helper simples (opcional, para facilitar uso)
window.getEndpointUrl = function(endpoint) {
    if (!window.APP_BASE_URL) {
        console.warn('[CONFIG] APP_BASE_URL não disponível');
        return null;
    }
    return window.APP_BASE_URL + '/' + endpoint.replace(/^\//, '');
};

